{{ define "main" }}

{{ $cardType := .Section }}
{{ $cardTypeSingular := $cardType | lower | singularize }}
{{ $cardTypePlural := $cardType | lower | pluralize }}
{{ $cardPartial := print $cardTypeSingular "-card" ".html" }}

<div class="{{- $cardTypePlural -}}-page">
    <div class="container">
        <header class="page-header">
            <h1>{{ .Title }}</h1>
            <p>{{ .Content }}</p>
        </header>

        <div class="{{- $cardTypePlural -}}-grid" id="random-{{- $cardTypePlural -}}-grid">
            {{- $allCards := where .Site.RegularPages "Section" $cardTypePlural -}}
            {{- $allCards = where $allCards "Draft" false -}}
            {{ range $allCards }}
                {{ partial $cardPartial . }}
            {{ end }}
        </div>

    </div>
</div>
{{ end }}
