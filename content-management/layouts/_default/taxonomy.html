{{ define "main" }}
<main class="taxonomy-list" style="max-width: 700px; margin: 2rem auto; padding: 2rem; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px #0001;">
  <h1 style="font-size:2.2rem; margin-bottom:1.5rem;">{{ .Title }}</h1>

  {{ .Content }}
  
  <!-- Pagination info -->
  {{ if gt .Paginator.TotalPages 1 }}
  <div style="margin-bottom: 1.5rem; color: #666; font-size: 0.9rem;">
    Showing {{ .Site.Params.pagination.pagerSize | default 12 }} per page of {{ len .Pages }} (Page {{ .Paginator.PageNumber }} of {{ .Paginator.TotalPages }})
  </div>
  {{ end }}

  <ul style="list-style:none; padding:0;">
    {{ range .Paginator.Pages }}
      <li style="margin-bottom:1.2em; padding:1em; background:#f9f9f9; border-radius:8px; box-shadow:0 1px 3px #0001;">
        <a href="{{ .RelPermalink }}" style="font-size:1.15rem; font-weight:600; color:#2a5d9f; text-decoration:none;">{{ .Title }}</a>
        <span style="color:#888; font-size:0.95em; margin-left:0.7em;">{{ .Date.Format "Jan 2, 2006" }}</span>
        <div class="summary" style="margin-top:0.3em; color:#666; font-size:0.98em;">{{ .Summary }}</div>
      </li>
    {{ end }}
  </ul>

  <!-- Pagination navigation -->
  {{ if gt .Paginator.TotalPages 1 }}
  <nav style="margin-top: 2rem; text-align: center;">
    <div style="display: inline-flex; gap: 0.5rem; align-items: center;">
      {{ if .Paginator.HasPrev }}
        <a href="{{ .Paginator.Prev.URL }}" style="padding: 0.5rem 1rem; background: #2a5d9f; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;">« Previous</a>
      {{ end }}
      
      {{ $current := .Paginator.PageNumber }}
      {{ $total := .Paginator.TotalPages }}
      {{ $window := 5 }}
      {{ $half := div $window 2 }}
      {{ $start := sub $current $half }}
      {{ if lt $start 1 }}
        {{ $start = 1 }}
      {{ end }}
      {{ $end := add $current $half }}
      {{ $min_end := add $start (sub $window 1) }}
      {{ if gt $min_end $end }}
        {{ $end = $min_end }}
      {{ end }}
      {{ if gt $end $total }}
        {{ $end = $total }}
      {{ end }}
      {{ $start = cond (lt (sub $current $half) (sub $end $window)) (sub $current $half) (sub $end $window) }}
      {{ if lt $start 1 }}
        {{ $start = 1 }}
      {{ end }}
      {{ range $i := (seq $start $end) }}
        {{ $url := $.RelPermalink }}
        {{ if gt $i 1 }}
          {{ $url = printf "%s/page/%d/" $.RelPermalink $i }}
        {{ end }}
        {{ if eq $i $current }}
          <span style="padding: 0.5rem 0.75rem; background: #2a5d9f; color: white; border-radius: 4px; font-weight: bold;">{{ $i }}</span>
        {{ else }}
          <a href="{{ $url }}" style="padding: 0.5rem 0.75rem; background: #f5f5f5; color: #2a5d9f; text-decoration: none; border-radius: 4px; border: 1px solid #ddd;">{{ $i }}</a>
        {{ end }}
      {{ end }}
      
      {{ if .Paginator.HasNext }}
        <a href="{{ .Paginator.Next.URL }}" style="padding: 0.5rem 1rem; background: #2a5d9f; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;">Next »</a>
      {{ end }}
    </div>
  </nav>
  {{ end }}
</main>
{{ end }}
